From 68fd2994aae24d9ae76935994ae48793d3292fc5 Mon Sep 17 00:00:00 2001
From: Marek Goldmann <mgoldman@redhat.com>
Date: Fri, 23 Nov 2012 13:12:22 +0100
Subject: [PATCH] [fedora] Missing module dependencies after unbundling

---
 build/build.xml                                                |  2 ++
 build/pom.xml                                                  | 10 ++++++++++
 .../main/resources/modules/com/sun/xml/bind/main/module.xml    |  3 +++
 .../main/resources/modules/org/apache/cxf/impl/main/module.xml |  6 ++++++
 .../main/resources/modules/org/apache/xerces/main/module.xml   |  2 ++
 5 files changed, 23 insertions(+)

diff --git a/build/build.xml b/build/build.xml
index 6ed2367..634e305 100644
--- a/build/build.xml
+++ b/build/build.xml
@@ -560,6 +560,8 @@
 
         <module-def name="org.apache.james.mime4j">
             <maven-resource group="org.apache.james" artifact="apache-mime4j-core"/>
+            <maven-resource group="org.apache.james" artifact="apache-mime4j-dom"/>
+            <maven-resource group="org.apache.james" artifact="apache-mime4j-storage"/>
         </module-def>
     	
         <module-def name="org.apache.juddi.juddi-client">
diff --git a/build/pom.xml b/build/pom.xml
index 41d5fde..b6e3664 100644
--- a/build/pom.xml
+++ b/build/pom.xml
@@ -557,6 +557,16 @@
                 </dependency>
 
                 <dependency>
+                    <groupId>org.apache.james</groupId>
+                    <artifactId>apache-mime4j-dom</artifactId>
+                </dependency>
+
+                <dependency>
+                    <groupId>org.apache.james</groupId>
+                    <artifactId>apache-mime4j-storage</artifactId>
+                </dependency>
+
+                <dependency>
                     <groupId>org.apache.neethi</groupId>
                     <artifactId>neethi</artifactId>
                 </dependency>
diff --git a/build/src/main/resources/modules/com/sun/xml/bind/main/module.xml b/build/src/main/resources/modules/com/sun/xml/bind/main/module.xml
index a48db1b..f821c27 100644
--- a/build/src/main/resources/modules/com/sun/xml/bind/main/module.xml
+++ b/build/src/main/resources/modules/com/sun/xml/bind/main/module.xml
@@ -28,6 +28,9 @@
     </properties>
 
     <resources>
+        <!-- Unbundled from jaxb in Fedora -->
+        <resource-root path="istack-commons-runtime.jar"/>
+        <resource-root path="txw2.jar"/>
         <!-- Insert resources here -->
     </resources>
 
diff --git a/build/src/main/resources/modules/org/apache/cxf/impl/main/module.xml b/build/src/main/resources/modules/org/apache/cxf/impl/main/module.xml
index 9d749f8..2530c5b 100644
--- a/build/src/main/resources/modules/org/apache/cxf/impl/main/module.xml
+++ b/build/src/main/resources/modules/org/apache/cxf/impl/main/module.xml
@@ -28,6 +28,12 @@
     </resources>
 
     <dependencies>
+        <system>
+            <paths>
+                <path name="javax/jws/soap"/>
+            </paths>
+        </system>
+
         <module name="asm.asm" />
         <module name="javax.api" />
         <module name="javax.annotation.api" />
diff --git a/build/src/main/resources/modules/org/apache/xerces/main/module.xml b/build/src/main/resources/modules/org/apache/xerces/main/module.xml
index 0e04923..65f3893 100644
--- a/build/src/main/resources/modules/org/apache/xerces/main/module.xml
+++ b/build/src/main/resources/modules/org/apache/xerces/main/module.xml
@@ -25,6 +25,8 @@
 <module xmlns="urn:jboss:module:1.1" name="org.apache.xerces">
 
     <resources>
+        <!-- Unbundled from xerces in Fedora -->
+        <resource-root path="xml-commons-apis.jar"/>
         <!-- Insert resources here -->
     </resources>
 
